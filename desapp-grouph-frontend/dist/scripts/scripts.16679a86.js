"use strict";angular.module("desappGrouphFrontendApp",["ngAnimate","ngAria","ngCookies","ngMessages","ngResource","ngRoute","ngSanitize","ngTouch","pascalprecht.translate","ui.bootstrap","auth0.lock","angular-jwt","ngMaterial","ngMessages","ngMap","tmh.dynamicLocale"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl",controllerAs:"about"}).when("/events",{templateUrl:"views/events.html",controller:"EventService",controllerAs:"events"}).when("/search-events",{templateUrl:"views/search-events.html",controller:"SearchEventCtrl",controllerAs:"search-events"}).when("/select-event-type",{templateUrl:"views/select-event-type.html",controller:"CreateEventCtrl"}).when("/create-event",{templateUrl:"views/create-event.html",controller:"CreateEventCtrl"}).when("/login",{templateUrl:"views/login.html",controller:"LoginCtrl",controllerAs:"loginCtrl"}).otherwise({redirectTo:"/"})}]).config(["$translateProvider","tmhDynamicLocaleProvider",function(a,b){a.translations("en",{APPNAME:"Where we go?",HOME:"Home",EVENTS:"Events",SEARCH:"Search",login:"Login",logout:"Logout",description:"Description",price:"Price",plannings:"Plannings",preferences:"Preferences",profile:"Profile",settings:"Setting"}),a.translations("es",{APPNAME:"¿A dónde vamos?",HOME:"Inicio",EVENTS:"Eventos",SEARCH:"Buscar",login:"Iniciar sesión",logout:"Salir",description:"Descripción",price:"Precio",plannings:"Salidas",preferences:"Preferencias",profile:"Perfil",settings:"Configuración"}),a.preferredLanguage("es"),b.localeLocationPattern("/scripts/angular-i18n/angular-locale_{{locale}}.js")}]).config(["lockProvider","jwtOptionsProvider",function(a,b){a.init({clientID:"HpQcbV9OE6ImZNpqW8LDhBlppJnOaWRM",domain:"matiazzz.auth0.com"}),b.config({tokenGetter:function(){return localStorage.getItem("id_token")}})}]),angular.module("desappGrouphFrontendApp").controller("MainCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("desappGrouphFrontendApp").controller("AboutCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]});var url="http://localhost:8080/rest/";angular.module("desappGrouphFrontendApp").controller("UserService",["$scope","$http",function(a,b){b.get(url+"user/getAll").then(function(b){a.allUsers=b.data})}]),angular.module("desappGrouphFrontendApp").controller("EventService",["$scope","$http",function(a,b){b.get(url+"event/mostPopular").then(function(b){a.mostPopularEvents=b.data}),b.get(url+"event/getAll").then(function(b){a.events=b.data}),b.get(url+"event/size").then(function(b){a.events=b.data})}]),angular.module("desappGrouphFrontendApp").service("eventServices",["$http",function(a){return{getAll:function(){return a({method:"get",url:url+"event/getAll"})},get:function(b){return a({method:"get",url:url+"event/"+b})},getSize:function(){return a({method:"get",url:url+"event/size"})},getPage:function(b,c){return a({method:"get",url:url+"event/get/"+b+"/"+c})},newEvent:function(b,c,d,e,f,g,h){return a({method:"post",url:url+"event/newEvent/",data:$.param({title:b,description:c,imgUrl:d,day:e.getUTCDate(),month:e.getMonth()+1,year:e.getFullYear(),hour:f.getHours(),minutes:f.getMinutes(),price:g,placeName:h.name,placeAddress:h.address}),headers:{"Content-Type":"application/x-www-form-urlencoded"}})}}}]),angular.module("desappGrouphFrontendApp").service("userServices",["$http",function(a){return{getAll:function(){return a({method:"get",url:url+"user/getAll"})},getById:function(b){return a({method:"get",url:url+"user/"+b})},getByUsername:function(b){return a({method:"get",url:url+"user/getByUsername/"+b})}}}]),angular.module("desappGrouphFrontendApp").controller("EventsCtrl",function(){}),angular.module("desappGrouphFrontendApp").controller("SearchEventCtrl",["$scope","$uibModal","eventServices",function(a,b,c){c.getSize().then(function(b){a.eventsSize=b.data.size,a.eventsSize/9>0?a.pages=parseInt(a.eventsSize/9+1):a.pages=parseInt(a.eventsSize/9)},function(a){console.log(a)}),a.loadPage=function(b){c.getPage(b,9).then(function(c){a.events=c.data,a.actualPage=b},function(a){console.log(a)})},a.activePage=function(b){return a.actualPage==b},a.showEventDetail=function(a){b.open({templateUrl:"views/event-detail.html",controller:"eventDetailCtrl",size:"lg",resolve:{idEvent:function(){return a}}})},a.getPages=function(a){return new Array(a)},a.loadPage(1)}]),angular.module("desappGrouphFrontendApp").controller("eventDetailCtrl",["$scope","$uibModalInstance","eventServices","idEvent",function(a,b,c,d){c.get(d).then(function(b){a.event=b.data,a.eventDate=new Date(a.event.date[0],a.event.date[1]-1,a.event.date[2],a.event.time.hourOfDay,a.event.time.minuteOfHour)},function(a){console.log(a)}),a.close=function(){b.dismiss("cancel")}}]),angular.module("desappGrouphFrontendApp").service("authService",["lock","authManager","$q",function(a,b,c){function d(){return i.promise}function e(){a.show()}function f(){localStorage.removeItem("id_token"),b.unauthenticate()}function g(){a.on("authenticated",function(c){a.getProfile(c.idToken,function(a,d){return a?console.log(a):(localStorage.setItem("profile",JSON.stringify(d)),i.resolve(d),localStorage.setItem("id_token",c.idToken),void b.authenticate())})})}var h=JSON.parse(localStorage.getItem("profile"))||null,i=c.defer();return h&&i.resolve(h),{login:e,logout:f,registerAuthenticationListener:g,getProfileDeferred:d}}]),angular.module("desappGrouphFrontendApp").controller("LoginCtrl",["$scope","authService",function(a,b){a.authService=b,b.getProfileDeferred().then(function(b){a.profile=b})}]),angular.module("desappGrouphFrontendApp").controller("CreateEventCtrl",["$scope","$location","eventServices",function(a,b,c){a.alerts={success:[],errors:[]},a.event={title:"",description:"",imgUrl:"",price:0,place:{name:"",address:""}},a.selectEventType=function(a){console.log(a),b.path("/create-event")},a.createEvent=function(){c.newEvent(a.event.title,a.event.description,a.event.imgUrl,a.dt,a.mytime,a.event.price,a.event.place).then(function(b){a.alerts.success=[1]},function(a){console.log(a)})},a.today=function(){a.dt=new Date},a.today(),a.clear=function(){a.dt=null},a.options={minDate:new Date,showWeeks:!0},a.toggleMin=function(){a.options.minDate=a.options.minDate?null:new Date},a.toggleMin(),a.setDate=function(b){a.dt=b},a.mytime=new Date,a.ismeridian=!1,a.hstep=1,a.mstep=1,a.setTime=function(b){a.mytime=b},a.update=function(){var b=new Date;b.setHours(14),b.setMinutes(0),a.mytime=b}}]),angular.module("desappGrouphFrontendApp").run(["$rootScope","authService","lock","tmhDynamicLocale","authManager",function(a,b,c,d,e){a.authService=b,b.registerAuthenticationListener(),c.interceptHash(),e.checkAuthOnRefresh(),d.set("es-ar")}]),angular.module("desappGrouphFrontendApp").run(["$templateCache",function(a){a.put("views/about.html","<p>This is the about view.</p>"),a.put("views/create-event.html",'<div ng-controller="CreateEventCtrl as ce" class="messagealert" ng-repeat="alert in ce.alerts.success"> <div class="alert alert-success alert-dismissible"> <a href class="close" data-dismiss="alert" aria-label="close">&times;</a> <strong>Se creó un nuevo evento.</strong> Ver <a href="#" class="alert-link">mis eventos</a>. </div> </div> <form ng-if="isAuthenticated"> <h3 class="text-center"> Crear evento </h3> <div class="form-group"> <label>Nombre del evento</label> <input class="form-control" ng-model="event.title" placeholder="Nombre del evento" required> </div> <hr> <div class="form-group"> <label for="exampleTextarea">Descripción</label> <textarea class="form-control" rows="3" ng-model="event.description" placeholder="Escriba una descripción del evento." required></textarea> </div> <hr> <div class="form-group"> <label>Lugar del evento</label> <input class="form-control" ng-model="event.place.name" placeholder="Nombre del lugar" required> <input class="form-control" ng-model="event.place.address" placeholder="Dirección del lugar" required> </div> <hr> <div class="form-group"> <label for="exampleInputFile">Imágen</label> <input class="form-control" ng-model="event.imgUrl" placeholder="Url de una imágen (opcional)"> </div> <hr> <div class="row"> <div class="col-md-6"> <div style="display:inline-block; min-height:290px"> <label>Fecha del evento</label> <div uib-datepicker ng-model="dt" class="well well-sm" ng-change="setDate(dt)" datepicker-options="options"></div> </div> </div> <div class="col-md-6"> <label>Horario del evento</label> <div uib-timepicker ng-model="mytime" hour-step="hstep" minute-step="mstep" ng-change="setTime(mytime)" show-meridian="ismeridian"></div> </div> <pre class="alert alert-info"><em>{{dt | date:\'fullDate\' }}</em></pre> <pre class="alert alert-info">{{mytime | date:\'shortTime\' }}</pre> </div> <hr> <div class="form-group"> <label>Precio del evento</label> <input class="form-control" ng-model="event.price" placeholder="Precio del evento" required> </div> <hr> <button type="submit" class="btn btn-primary" ng-click="createEvent()">Crear evento</button> </form> <br>'),a.put("views/event-detail.html",'<div class="modal-header"> <h3 class="modal-title" id="modal-title">{{event.title}} <span ng-click="close()" class="glyphicon glyphicon-remove pull-right"></span> </h3> </div> <div class="modal-body" id="modal-body"> <img class="img-detail" ng-src="{{event.urlImg}}" alt="..."> </div> <div class="modal-body" id="modal-body"> <md-content> <md-tabs md-dynamic-height="" md-border-bottom=""> <md-tab label="{{\'description\' | translate}}"> <md-content class="md-padding"> <p> {{event.description}} </p> </md-content> </md-tab> <md-tab label="{{\'price\' | translate}}"> <md-content class="md-padding"> <h3> {{ event.price | currency }} </h3> </md-content> </md-tab> <md-tab label="Día y horario"> <md-content class="md-padding"> <h3> {{eventDate | date:\'fullDate\'}} </h3> <h3> {{eventDate | date:\'shortTime\'}} </h3> </md-content> </md-tab> <md-tab label="Ubicación"> <md-content class="md-padding"> <h3> {{event.place.name}} </h3> <h4> {{event.place.address}} </h4> <map center="{{event.place.address}}"> </md-content> </md-tab> </md-tabs> </md-content> </div> <div class="modal-footer"> </div>'),a.put("views/events.html",'<div class="container"> <div id="carousel-example-generic" class="carousel slide" data-ride="carousel"> <!-- Indicators --> <ol class="carousel-indicators"> <li data-target="#carousel-example-generic" data-slide-to="0" class="active"></li> <li data-target="#carousel-example-generic" data-slide-to="1"></li> <li data-target="#carousel-example-generic" data-slide-to="2"></li> </ol> <!-- Wrapper for slides --> <div class="carousel-inner"> <div class="item" ng-class="{\'item active\': $first}" ng-repeat="event in mostPopularEvents"> <img ng-src="{{event.urlImg}}" alt="..."> <div class="carousel-caption"> <h2>{{event.title}}</h2> </div> </div> </div> <!-- Controls --> <!--<a class="left carousel-control" href="#carousel-example-generic" data-slide="prev">\n      <span class="glyphicon glyphicon-chevron-left"></span>\n    </a>\n    <a class="right carousel-control" href="#carousel-example-generic" data-slide="next">\n      <span class="glyphicon glyphicon-chevron-right"></span>\n    </a>--> </div> </div> <div class="container"> <div class="row"> <h2 class="margin-label"><span class="label label-default col-sm-12 margin-label">Música</span></h2> <div class="col-sm-12 col-md-4" ng-repeat="event in mostPopularEvents"> <div class="thumbnail eventPreview"> <img ng-controller="SearchEventCtrl" ng-click="showEventDetail(event.id)" class="img-event" ng-src="{{event.urlImg}}" alt="..."> <div class="caption"> <h4 ng-controller="SearchEventCtrl" ng-click="showEventDetail(event.id)">{{event.title}}</h4> </div> </div> </div> </div> <div class="row"> <h2 class="margin-label"><span class="label label-default col-sm-12 margin-label">Cine</span></h2> <div class="col-sm-12 col-md-4" ng-repeat="event in mostPopularEvents"> <div class="thumbnail eventPreview"> <img ng-controller="SearchEventCtrl" ng-click="showEventDetail(event.id)" class="img-event" ng-src="{{event.urlImg}}" alt="..."> <div class="caption"> <h4 ng-controller="SearchEventCtrl" ng-click="showEventDetail(event.id)">{{event.title}}</h4> </div> </div> </div> </div> <div class="row"> <h2 class="margin-label"><span class="label label-default col-sm-12 margin-label">Gastronomía</span></h2> <div class="col-sm-12 col-md-4" ng-repeat="event in mostPopularEvents"> <div class="thumbnail eventPreview"> <img ng-controller="SearchEventCtrl" ng-click="showEventDetail(event.id)" class="img-event" ng-src="{{event.urlImg}}" alt="..."> <div class="caption"> <h4 ng-controller="SearchEventCtrl" ng-click="showEventDetail(event.id)">{{event.title}}</h4> </div> </div> </div> </div> <h2><a href="#/search-events"><span class="col-sm-12 label label-info margin-label">Ver todos los eventos</span></a></h2> </div>'),a.put("views/login.html",'<h4 ng-click="authService.login()" translate="login"></h4>'),a.put("views/main.html",'<div class="jumbotron"> <h1>{{\'APPNAME\' | translate}}</h1> <p class="lead"> <img src="images/yeoman.8cb970fb.png" alt="I\'m Yeoman"><br> Always a pleasure scaffolding your apps. </p> <p><a class="btn btn-lg btn-success" ng-href="#/">Splendid!<span class="glyphicon glyphicon-ok"></span></a></p> </div> <div class="container"> <div class="container"> <div class="row"> <div class="col-sm-4"> <div class="row"> <div class="col-sm-10 col-sm-offset-2 text-center"><h3>{{\'EVENTS\' | translate}}</h3><p>Enterate de todos los eventos disponibles y compartelos con tus amigos.</p></div> </div> </div> <div class="col-sm-4 text-center"> <div class="row"> <div class="col-sm-10 col-sm-offset-1 text-center"><h3>Salidas</h3><p>Organiza salidas para ir con tus amigos, pareja o incluso salidas para ir solo.</p></div> </div> </div> <div class="col-sm-4 text-center"> <div class="row"> <div class="col-sm-10 text-center"><h3>Perfil</h3><p>Creá tu perfil con todos tus gustos y amigos asi podemos recomendarte los mejores eventos para vos.</p></div> </div> </div> </div><!--/row--> <div class="row"><br></div> </div><!--/container--> </div>'),a.put("views/search-events.html",'<div class="container"> <div class="row"> <div class="custom-search-input"> <div class="input-group col-md-12"> <input type="text" class="search-query form-control" placeholder="{{\'SEARCH\' | translate}}"> <span class="input-group-btn"> <button class="btn btn-default" type="button"> <span class="glyphicon glyphicon-search"></span> </button> </span> </div> </div> </div> </div> <div class="container"> <div class="row" style="display:flex; flex-wrap: wrap"> <div class="col-sm-12 col-md-4" ng-repeat="event in events"> <div class="thumbnail eventPreview"> <img ng-click="showEventDetail(event.id)" class="img-event" ng-src="{{event.urlImg}}" alt="..."> <div class="caption"> <h4 ng-click="showEventDetail(event.id)">{{event.title}}</h4> </div> </div> </div> </div> </div> <div class="pagination-centered"> <nav aria-label="Page navigation"> <ul class="pagination"> <li> <a href aria-label="Previous" ng-if="actualPage > 1" ng-click="loadPage(actualPage - 1)"> <span aria-hidden="true">&laquo;</span> </a> </li> <li ng-class="{\'active\': activePage($index+1)}" ng-repeat="i in getPages(pages) track by $index"> <a href ng-click="loadPage($index+1)">{{$index+1}}</a> </li> <li> <a href aria-label="Next" ng-if="actualPage < pages" ng-click="loadPage(actualPage + 1)"> <span aria-hidden="true">&raquo;</span> </a> </li> </ul> </nav> </div>'),a.put("views/select-event-type.html",'<div class="container" ng-if="isAuthenticated"> <h3 class="text-center">Seleccionar tipo de evento</h3> <div class="row category-child" style="margin-top:20px"> <div class="col-md-4 thumb pointer"> <a class="thumbnail" ng-click="selectEventType(\'music\')"> <img class="img-responsive" src="/images/music.ico" alt=""> <div class="wrapper"> <div class="caption post-content"> <span>Música</span> </div> </div> </a> </div> <div class="col-md-4 thumb pointer"> <a class="thumbnail" ng-click="selectEventType(\'movie\')"> <img class="img-responsive" src="/images/movie.f9e239cb.png" alt=""> <div class="wrapper"> <div class="caption post-content"> <span>Cine</span> </div> </div> </a> </div> <div class="col-md-4 thumb pointer"> <a class="thumbnail" ng-click="selectEventType(\'food\')"> <img class="img-responsive" src="/images/food.e91b1c63.png" alt=""> <div class="wrapper"> <div class="caption post-content"> <span>Gastronomía</span> </div> </div> </a> </div> </div> </div>')}]);